# Лабораторная работа 2 - JSF приложение

Приложение на базе JavaServer Faces Framework для проверки попадания точки в заданную область на координатной плоскости.

## Структура проекта

### Facelets шаблоны:
- `start.xhtml` - стартовая страница с часами и ссылкой на основную страницу
- `main.xhtml` - основная страница приложения с формой, графиком и таблицей результатов

### Managed Beans:
- `StartPageBean` (@RequestScoped) - управляет данными стартовой страницы
- `AreaCheckBean` (@ViewScoped) - управляет формой проверки точки
- `ResultsBean` (@SessionScoped) - управляет списком результатов и доступом к БД

### Entity:
- `ResultEntity` - JPA сущность для хранения результатов в PostgreSQL

### Валидаторы:
- `YValidator` - валидация значения Y (-3 до 3)
- `RValidator` - валидация значения R (0.1 до 3)

### Конфигурация:
- `faces-config.xml` - правила навигации между страницами
- `persistence.xml` - конфигурация EclipseLink для PostgreSQL
- `beans.xml` - конфигурация CDI
- `web.xml` - конфигурация JSF

## Требования

- Java 17+
- PostgreSQL (настройки в persistence.xml)
- Application Server с поддержкой Jakarta EE 9+ (WildFly, GlassFish, TomEE и т.д.)

## Настройка базы данных

1. Создайте базу данных PostgreSQL:
```sql
CREATE DATABASE web3db;
```

2. Настройте параметры подключения в `src/main/resources/META-INF/persistence.xml`:
   - URL: `jdbc:postgresql://localhost:5432/web3db`
   - User: `postgres`
   - Password: `postgres`

## Сборка и развертывание

```bash
# Сборка WAR файла
./gradlew clean war

# Развертывание на WildFly
# Скопируйте labwork2.war в C:\wildfly\standalone\deployments\
# Или используйте веб-интерфейс администратора WildFly
```

## Использование

1. Запустите сервер приложений
2. Откройте в браузере: `http://localhost:8080/labwork2/start.xhtml`
3. На стартовой странице отображаются:
   - ФИО студента, группа, вариант
   - Интерактивные часы (обновляются каждые 13 секунд)
   - Ссылка на основную страницу
4. На основной странице:
   - Выберите X из кнопок: -5, -4, -3, -2, -1, 0, 1, 2, 3
   - Введите Y в диапазоне от -3 до 3
   - Установите R с помощью спиннера (0.1 до 3, шаг 0.1)
   - Кликните на график для выбора координат или нажмите "Проверить"
   - Результаты сохраняются в БД и отображаются в таблице

## Компоненты

- **X**: Кнопки выбора (HTML buttons) со значениями от -5 до 3
- **Y**: Текстовое поле (h:inputText) с валидацией диапазона -3 до 3
- **R**: Спиннер PrimeFaces (p:spinner) с диапазоном 0.1 до 3, шаг 0.1
- **График**: Canvas с интерактивным выбором координат и отображением области
- **Таблица результатов**: JSF dataTable с историей проверок из БД

## Примечания

- ICEfaces был удален из зависимостей из-за проблем совместимости с JSF 4.0
- Используется только PrimeFaces для компонента спиннера (p:spinner)
